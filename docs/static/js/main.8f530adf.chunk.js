(this["webpackJsonpbananagrams-helper"]=this["webpackJsonpbananagrams-helper"]||[]).push([[0],{12:function(t,e,a){},16:function(t,e,a){"use strict";a.r(e);var r=a(4),n=a(0),i=(a(12),a(1)),s=a.n(i),o=a(9),c=a.n(o),u=a(2),l=a(3),h=a(7),d=function(){function t(e,a,r){Object(u.a)(this,t),this.board=a||new Map,this.columns=r||1,this.tray=e}return Object(l.a)(t,[{key:"getBoard",value:function(){var t=this,e=Math.max.apply(Math,Object(h.a)(this.board.keys())),a=0;return Array(e).fill(!0).map((function(e,r){var n=t.board.get(r+1);if(n){var i=Math.max.apply(Math,[a].concat(Object(h.a)(n.keys())));i>a&&(a=i);var s=Array(a).fill(" ");return n.forEach((function(t,e){s[e-1]=t})),s}return Array(a).fill(" ")}))}},{key:"getSegments",value:function(){}},{key:"getStateAfterPlacement",value:function(e,a){var r=this,n=e.row,i=e.col,s=e.down,o=e.word,c=new Map;this.board.forEach((function(t,e){var a=new Map;t.forEach((function(t,e){a.set(e,t)})),c.set(e,a)}));var u=this.columns,l=this.tray,d=!1;if(s)o.split("").forEach((function(t,e){if(!d){var s=c.get(n+e),o=s.get(i);if(o){if(o!==t)return void(d=!0)}else{var u=!1;if(Array(r.columns).fill(!0).map((function(t,e){var a=s.get(e+1);if(a)return u&&(u=!1),a;var r=" ";return u?r="":u=!0,r})).trim().split(" ").forEach((function(t){a.isAWord(t)||(d=!0)})),d)return;l=l.replace(t,"")}s.set(i,t)}}));else{var f=c.get(n);o.split("").forEach((function(t,e){if(!d){var n=i+e,s=f.get(n);if(s){if(s!==t)return void(d=!0)}else{var o=Math.max.apply(Math,Object(h.a)(r.board.keys())),c=!1;if(Array(o).fill(!0).map((function(t,e){var a=r.board.get(e+1).get(n);if(a)return c&&(c=!1),a;var i=" ";return c?i="":c=!0,i})).trim().split(" ").forEach((function(t){a.isAWord(t)||(d=!0)})),d)return;l=l.replace(t,"")}f.set(n,t),n>u&&(u=n)}}))}return!d&&new t(l,c,u)}},{key:"getTray",value:function(){return this.tray}},{key:"isSolution",value:function(){return!this.tray}}]),t}(),f=a.p+"static/media/words.93cee45c.txt",v=function(){function t(){var e=this;Object(u.a)(this,t);var a=f.split(";"),r=new RegExp("([0-9A-Z]+):([0-9A-Z]+)"),n=new Map,i=0;a.forEach((function(t,a){var s=r.exec(t);s?n.set(e.fromAlphaCode(s[1]),e.fromAlphaCode(s[2])):i=a}));var s=new Map(a.slice(i,a.length).map((function(t,e){return[e,t]})));this.trie={nodes:s,syms:n,symCount:i}}return Object(l.a)(t,[{key:"canBeMadeFromTray",value:function(t,e){var a=!0,r=t;return e.split("").forEach((function(t){r.includes(t)?r=r.replace(t,""):a=!1})),a}},{key:"fromAlphaCode",value:function(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(void 0!==e[t])return e.indexOf(t);for(var a=0,r=1,n=36,i=1;r<t.length;)a+=n,r++,n*=36;for(var s=t.length-1;s>=0;s--){var o=t.charCodeAt(s)-48;o>10&&(o-=7),a+=o*i,i*=36}return a}},{key:"getPossiblePlacements",value:function(t,e){var a=new Map,r=new Set,n=this.getWordsFromTray(t);return e.forEach((function(t){var e=a.get(t.pattern);e?e.add(t):a.set(t.pattern,new Set([t]))})),n.forEach((function(t){a.keys().forEach((function(e){e.test(t)&&a.get(e).forEach((function(t){}))}))})),r}},{key:"getWordsFromTray",value:function(t){var e=this,a=new Set;return function r(n,i){var s=e.trie.nodes.get(n);"!"===s[0]&&(e.canBeMadeFromTray(t,i)&&a.add(i),s=s.slice(1));for(var o=s.split(/([A-Z0-9,]+)/g),c=0;c<o.length;c+=2){var u=o[c];if(u){var l=o[c+1],h=i+u;","!==l&&void 0!==l?r(e.indexFromRef(l,n),h):e.canBeMadeFromTray(t,h)&&a.add(h)}}}(0,""),a}},{key:"has",value:function(t,e){return!!t&&(e.length>1?this.has(t.get(e[0]),e.slice(1)):t.has(e))}},{key:"indexFromRef",value:function(t,e){var a=this.fromAlphaCode(t);return a<this.trie.symCount?this.trie.syms.get(a):e+a+1-this.trie.symCount}},{key:"isAWord",value:function(t){var e=t.split("");return e.push("_"),this.has(this.trie,e)}}]),t}(),p=function(){function t(){Object(u.a)(this,t),this.boardStates=new Map,this.dictionary=new v,this.running=!1}return Object(l.a)(t,[{key:"getPossibleNextStates",value:function(t){var e=this,a=t.getTray(),r=t.getSegments(),n=this.dictionary.getPossiblePlacements(a,r),i=new Set;return n.forEach((function(a){var r=t.getStateAfterPlacement(a,e.dictionary);r&&i.add(r)})),i}},{key:"onUpdate",value:function(t){this.updateCallback=t}},{key:"update",value:function(t,e){var a={message:t};e?(a.tray=e.getTray(),a.board=e.getBoard()):(a.tray="",a.board=[[]]),this.updateCallback(a)}},{key:"solve",value:function(t,e){var a=this,r=function(t){return new d(t)}(t),n=this.getPossibleNextStates(r);if(this.boardStates.clear(),n.size){var i=1,s=!1;if(n.forEach((function(t){s||(t.isSolution()?s=t:(a.boardStates.set(i.toString(),t),i++))})),s)return this.running=!1,void this.update("Solution found!",s);this.running=Symbol(),this.tryBoardState(this.running,"1")}else this.running=!1,this.update("No solutions possible!",r)}},{key:"tryBoardState",value:function(t,e){var a=this;if(!1===this.running||this.running===t){if(!this.boardStates.has(e)){var r=e.split(":"),n=r.length;return n<2?(this.running=!1,void this.update("No solutions possible!")):(r[n-2]=parseInt(r[n-2])+1,r[n-1]=0,void this.tryBoardState(t,r.join(":")))}var i=this.boardStates.get(e),s=this.getPossibleNextStates(i);if(i.setPossibleNextStates(s),s.size){var o=1,c=!1;if(s.forEach((function(t){c||(t.isSolution()?c=t:(a.boardStates.set("".concat(e,":").concat(o.toString()),t),o++))})),c)return this.running=!1,void this.update("Solution found!",c);var u=e.split(":"),l=u.length-1;u[l]=parseInt(u[l])+1,this.tryBoardState(t,u.join(":"))}}}}]),t}(),b=function(){var t=Object(i.useState)(""),e=Object(r.a)(t,2),a=e[0],s=e[1],o=Object(i.useState)([[]]),c=Object(r.a)(o,2),u=c[0],l=c[1],h=Object(i.useState)(""),d=Object(r.a)(h,2),f=d[0],v=d[1],b=Object(i.useState)(""),g=Object(r.a)(b,2),y=g[0],j=g[1],m=Object(i.useState)(""),O=Object(r.a)(m,2),S=O[0],x=O[1],k=new p;return k.onUpdate((function(t){var e=t.tray,a=t.message,r=t.board;x(e),j(a),l(r)})),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsx)("h1",{children:"Bananagrams Solver"})}),Object(n.jsx)("div",{className:"letterbox",children:Object(n.jsx)("input",{type:"text",placeholder:"yourtileshere",value:f,onInput:function(t){var e=t.target.value.replace(/[^A-Z]/gi,"").toLowerCase();v(e),k.solve(e,a)}})}),Object(n.jsxs)("div",{className:"controls",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{children:"Word Blacklist"}),Object(n.jsx)("small",{children:"(Comma-separated)"})]}),Object(n.jsx)("div",{children:Object(n.jsx)("input",{type:"text",value:a,onInput:function(t){var e=t.target.value.replace(/[^A-Z]/gi,"").toLowerCase();s(e),k.solve(f,e)}})})]}),Object(n.jsx)("div",{className:"boardbox",children:Object(n.jsx)("div",{className:"board",children:u.map((function(t,e){return Object(n.jsx)("div",{className:"row",children:t.map((function(t,e){return Object(n.jsx)("div",{className:" "===t?"cell empty":"cell",children:t},e)}))},e)}))})}),Object(n.jsx)("div",{className:"tray",children:S}),Object(n.jsx)("div",{className:"message",children:y})]})};c.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(b,{})}),document.getElementById("app"))}},[[16,1,2]]]);
//# sourceMappingURL=main.8f530adf.chunk.js.map